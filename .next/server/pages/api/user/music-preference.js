"use strict";(()=>{var e={};e.id=4277,e.ids=[4277],e.modules={8432:e=>{e.exports=require("bcryptjs")},9344:e=>{e.exports=require("jsonwebtoken")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1721:e=>{e.exports=import("@upstash/redis")},3292:e=>{e.exports=require("fs/promises")},1017:e=>{e.exports=require("path")},9463:(e,r,s)=>{s.a(e,async(e,t)=>{try{s.r(r),s.d(r,{config:()=>p,default:()=>c,routeModule:()=>d});var a=s(1802),i=s(7153),u=s(6249),n=s(6434),o=e([n]);n=(o.then?(await o)():o)[0];let c=(0,u.l)(n,"default"),p=(0,u.l)(n,"config"),d=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/user/music-preference",pathname:"/api/user/music-preference",bundlePath:"",filename:""},userland:n});t()}catch(e){t(e)}})},6434:(e,r,s)=>{s.a(e,async(e,t)=>{try{s.r(r),s.d(r,{default:()=>handler});var a=s(8936),i=s(9344),u=s.n(i),n=e([a]);async function handler(e,r){if("PUT"!==e.method)return r.status(405).json({error:"Method not allowed"});try{let s;let t=e.cookies.token;if(!t)return r.status(401).json({error:"Not authenticated"});try{s=u().verify(t,process.env.JWT_SECRET||"fallback-secret")}catch(e){return r.status(401).json({error:"Invalid token"})}let{notificationMusic:i}=e.body;if(!i||!["music1.mp3","music2.mp3","music3.mp3","music4.mp3","music5.mp3","music6.mp3","music7.mp3"].includes(i))return r.status(400).json({error:"Invalid music file selection"});let n=await (0,a.O4)(s.userId,i);r.json({success:!0,user:n,message:"Music preference updated successfully"})}catch(e){console.error("Error updating music preference:",e),r.status(500).json({error:"Internal server error"})}}a=(n.then?(await n)():n)[0],t()}catch(e){t(e)}})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[4222,7316,8936],()=>__webpack_exec__(9463));module.exports=s})();