"use strict";(()=>{var e={};e.id=5084,e.ids=[5084],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},168:(e,o,t)=>{t.r(o),t.d(o,{config:()=>c,default:()=>s,routeModule:()=>u});var i={};t.r(i),t.d(i,{default:()=>handler});var n=t(1802),l=t(7153),a=t(6249),r=t(7665);async function handler(e,o){try{if((0,r.VX)(e,{endpoint:"geolocate"}),"GET"!==e.method)return o.status(405).json({error:"Method not allowed",type:"method",message:"This endpoint only supports GET requests"});let t=e.headers["x-forwarded-for"],i=t?t.split(",")[0].trim():e.socket.remoteAddress,n=`https://ipapi.co/${i?encodeURIComponent(i):""}/json/`,l=await fetch(n,{timeout:5e3});if(!l.ok){console.warn("Primary geolocation API failed, trying fallback");let e=await fetch("https://ipapi.co/json/",{timeout:5e3});if(!e.ok)throw Error("Geolocation service unavailable");let t=await e.json();return console.log("Geolocation successful (fallback):",{ip:t.ip,city:t.city}),o.json({ip:t.ip||null,city:t.city||null,region:t.region||null,country:t.country_name||null,timezone:t.timezone||null,raw:t})}let a=await l.json();console.log("Geolocation successful:",{ip:a.ip,city:a.city}),o.json({ip:a.ip||null,city:a.city||null,region:a.region||null,country:a.country_name||null,timezone:a.timezone||null,raw:a})}catch(i){let t=(0,r.Ts)(e);return t.endpoint="geolocate",(i.message.includes("timeout")||i.message.includes("fetch"))&&(i.message="Geolocation service temporarily unavailable"),(0,r.zG)(i,o,t)}}let s=(0,a.l)(i,"default"),c=(0,a.l)(i,"config"),u=new n.PagesAPIRouteModule({definition:{kind:l.x.PAGES_API,page:"/api/geolocate",pathname:"/api/geolocate",bundlePath:"",filename:""},userland:i})}};var o=require("../../webpack-api-runtime.js");o.C(e);var __webpack_exec__=e=>o(o.s=e),t=o.X(0,[4222,7665],()=>__webpack_exec__(168));module.exports=t})();