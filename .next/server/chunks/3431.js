"use strict";exports.id=3431,exports.ids=[3431],exports.modules={3431:(t,a,e)=>{e.d(a,{Z:()=>AccountButton});var o=e(997),n=e(9816),i=e.n(n),r=e(6689),s=e(1163),p=e.n(s);function AccountPanel({user:t,isOpen:a,onClose:e,onToggleAnonymous:n}){let[s,m]=(0,r.useState)(!1),[x,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&m(t.isAnonymous||!1)},[t]);let handleToggleAnonymous=async()=>{if(!x)try{d(!0);let t=await fetch("/api/user/anonymous",{method:"PUT",headers:{"Content-Type":"application/json"}});if(t.ok){let a=await t.json();m(a.user.isAnonymous),n&&n(a.user)}else{let a=await t.json();alert(a.error||"Failed to toggle anonymous mode")}}catch(t){console.error("Error toggling anonymous mode:",t),alert("Network error while toggling anonymous mode")}finally{d(!1)}},handleLogout=async()=>{try{d(!0),await fetch("/api/logout",{method:"POST"}),p().push("/")}catch(t){console.error("logout error",t),p().push("/")}finally{d(!1)}};return a&&t?(0,o.jsxs)(o.Fragment,{children:[o.jsx("div",{onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.3)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",zIndex:998,animation:"fadeIn 0.3s ease"},className:"jsx-72e2053863c6bf2f account-panel-overlay"}),(0,o.jsxs)("div",{style:{position:"fixed",top:"80px",left:"20px",width:"320px",maxWidth:"calc(100vw - 40px)",background:"var(--glass)",backdropFilter:"blur(25px)",WebkitBackdropFilter:"blur(25px)",border:"2px solid var(--glass-border)",borderRadius:"20px",boxShadow:"var(--soft-shadow), 0 0 40px var(--theme-primary)20",padding:"24px",zIndex:999,animation:"slideInLeft 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},className:"jsx-72e2053863c6bf2f account-panel",children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"20px",padding:"16px",background:"var(--card-secondary)",borderRadius:"16px",border:"1px solid var(--glass-border)"},className:"jsx-72e2053863c6bf2f",children:[o.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"16px",overflow:"hidden",background:"linear-gradient(135deg, var(--theme-primary), var(--theme-secondary))",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",boxShadow:"0 8px 25px var(--theme-primary)30"},className:"jsx-72e2053863c6bf2f",children:t.avatar?o.jsx("img",{src:t.avatar,alt:"avatar",style:{width:"100%",height:"100%",objectFit:"cover"},className:"jsx-72e2053863c6bf2f"}):o.jsx("div",{style:{fontWeight:700,color:"white",fontSize:"20px"},className:"jsx-72e2053863c6bf2f",children:t.name.slice(0,2).toUpperCase()})}),(0,o.jsxs)("div",{style:{flex:1,minWidth:0},className:"jsx-72e2053863c6bf2f",children:[o.jsx("div",{style:{fontWeight:700,fontSize:"16px",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"jsx-72e2053863c6bf2f",children:s?t.anonymousName||"Anonymous User":t.name}),(0,o.jsxs)("div",{style:{display:"flex",gap:"8px",fontSize:"12px"},className:"jsx-72e2053863c6bf2f",children:[(0,o.jsxs)("span",{style:{padding:"2px 6px",background:"linear-gradient(135deg, var(--theme-primary)20, var(--theme-secondary)20)",borderRadius:"6px",fontWeight:"600",color:"var(--theme-primary)"},className:"jsx-72e2053863c6bf2f",children:["\uD83C\uDFC6 ",t.points," pts"]}),(0,o.jsxs)("span",{style:{padding:"2px 6px",background:"linear-gradient(135deg, var(--theme-accent)20, var(--theme-primary)20)",borderRadius:"6px",fontWeight:"600",color:"var(--theme-accent)"},className:"jsx-72e2053863c6bf2f",children:["\uD83D\uDD25 ",t.streak||0]})]})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"20px",padding:"16px",background:s?"linear-gradient(135deg, var(--theme-accent)10, var(--theme-primary)10)":"var(--card-secondary)",borderRadius:"12px",border:`1px solid ${s?"var(--theme-accent)30":"var(--glass-border)"}`},className:"jsx-72e2053863c6bf2f",children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},className:"jsx-72e2053863c6bf2f",children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",fontSize:"14px"},className:"jsx-72e2053863c6bf2f",children:[o.jsx("span",{className:"jsx-72e2053863c6bf2f",children:s?"\uD83D\uDD76️":"\uD83D\uDC64"}),"Anonymous Mode"]}),o.jsx("button",{onClick:handleToggleAnonymous,disabled:x,style:{width:"48px",height:"24px",borderRadius:"12px",border:"none",background:s?"linear-gradient(135deg, var(--theme-primary), var(--theme-secondary))":"var(--muted)",position:"relative",cursor:x?"not-allowed":"pointer",transition:"all 0.3s ease",opacity:x?.6:1},className:"jsx-72e2053863c6bf2f",children:o.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:"white",position:"absolute",top:"2px",left:s?"26px":"2px",transition:"left 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},className:"jsx-72e2053863c6bf2f"})})]}),o.jsx("div",{style:{fontSize:"12px",color:"var(--muted)",lineHeight:"1.4"},className:"jsx-72e2053863c6bf2f",children:s?'Your identity is hidden in classrooms. Others will see you as "'+(t.anonymousName||"Anonymous User")+'"':"Toggle to hide your identity in classrooms and appear as an anonymous user"})]}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},className:"jsx-72e2053863c6bf2f",children:[o.jsx("button",{onClick:()=>{e(),p().push("/dashboard")},disabled:x,style:{width:"100%",justifyContent:"center"},className:"jsx-72e2053863c6bf2f btn secondary",children:"\uD83C\uDFE0 Dashboard"}),o.jsx("button",{onClick:()=>{e(),p().push("/classrooms")},disabled:x,style:{width:"100%",justifyContent:"center"},className:"jsx-72e2053863c6bf2f btn secondary",children:"\uD83C\uDFEB Classrooms"}),o.jsx("button",{onClick:()=>{e(),p().push("/account")},disabled:x,style:{width:"100%",justifyContent:"center"},className:"jsx-72e2053863c6bf2f btn secondary",children:"⚙️ Account Settings"}),o.jsx("button",{onClick:handleLogout,disabled:x,style:{width:"100%",justifyContent:"center",background:"#ef4444",marginTop:"8px"},className:"jsx-72e2053863c6bf2f btn",children:x?"⏳ Signing out...":"\uD83D\uDEAA Sign Out"})]})]}),o.jsx(i(),{id:"72e2053863c6bf2f",children:'@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-moz-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-o-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes slideInLeft{from{opacity:0;-webkit-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slideInLeft{from{opacity:0;-moz-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slideInLeft{from{opacity:0;-o-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-o-transform:translatex(0);transform:translatex(0)}}@keyframes slideInLeft{from{opacity:0;-webkit-transform:translatex(-20px);-moz-transform:translatex(-20px);-o-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}@media(max-width:768px){.account-panel.jsx-72e2053863c6bf2f{top:70px!important;left:12px!important;right:12px!important;width:auto!important;max-width:none!important;padding:20px!important}.account-panel.jsx-72e2053863c6bf2f button.jsx-72e2053863c6bf2f{min-height:44px!important;padding:12px 16px!important;font-size:16px!important}.account-panel.jsx-72e2053863c6bf2f button[style*="width: 48px"].jsx-72e2053863c6bf2f{min-width:48px!important;min-height:28px!important}}@media(max-width:600px){.account-panel.jsx-72e2053863c6bf2f{top:60px!important;left:8px!important;right:8px!important;width:auto!important;max-width:none!important;padding:16px!important;-webkit-border-radius:16px!important;-moz-border-radius:16px!important;border-radius:16px!important}.account-panel.jsx-72e2053863c6bf2f div[style*="display: flex"][style*="gap: 16px"].jsx-72e2053863c6bf2f{-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-moz-box-orient:vertical!important;-moz-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-moz-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;text-align:center!important;gap:12px!important}.account-panel.jsx-72e2053863c6bf2f div[style*="width: 60px"].jsx-72e2053863c6bf2f{width:50px!important;height:50px!important}.account-panel.jsx-72e2053863c6bf2f div[style*="margin-bottom: 20px"].jsx-72e2053863c6bf2f{margin-bottom:16px!important;padding:12px!important}.account-panel.jsx-72e2053863c6bf2f button.jsx-72e2053863c6bf2f{font-size:15px!important;padding:12px 16px!important}}@media(max-width:480px){.account-panel.jsx-72e2053863c6bf2f{top:55px!important;left:6px!important;right:6px!important;padding:14px!important;-webkit-border-radius:14px!important;-moz-border-radius:14px!important;border-radius:14px!important}.account-panel.jsx-72e2053863c6bf2f div[style*="width: 60px"].jsx-72e2053863c6bf2f{width:44px!important;height:44px!important;font-size:16px!important}.account-panel.jsx-72e2053863c6bf2f div[style*="margin-bottom: 20px"].jsx-72e2053863c6bf2f{margin-bottom:12px!important;padding:10px!important}.account-panel.jsx-72e2053863c6bf2f button.jsx-72e2053863c6bf2f{font-size:14px!important;padding:10px 14px!important}.account-panel.jsx-72e2053863c6bf2f div[style*="display: flex"][style*="gap: 8px"].jsx-72e2053863c6bf2f{-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-moz-box-orient:vertical!important;-moz-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important;gap:6px!important}.account-panel.jsx-72e2053863c6bf2f span[style*="padding: 2px 6px"].jsx-72e2053863c6bf2f{padding:4px 8px!important;font-size:11px!important;text-align:center!important}}@media(hover:none)and (pointer:coarse){.account-panel.jsx-72e2053863c6bf2f button.jsx-72e2053863c6bf2f:hover{-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important}.account-panel.jsx-72e2053863c6bf2f button.jsx-72e2053863c6bf2f:active{-webkit-transform:scale(.95)!important;-moz-transform:scale(.95)!important;-ms-transform:scale(.95)!important;-o-transform:scale(.95)!important;transform:scale(.95)!important;-webkit-transition:-webkit-transform.1s ease!important;-moz-transition:-moz-transform.1s ease!important;-o-transition:-o-transform.1s ease!important;transition:-webkit-transform.1s ease!important;transition:-moz-transform.1s ease!important;transition:-o-transform.1s ease!important;transition:transform.1s ease!important}.account-panel.jsx-72e2053863c6bf2f button[style*="width: 48px"].jsx-72e2053863c6bf2f:active{-webkit-transform:scale(.9)!important;-moz-transform:scale(.9)!important;-ms-transform:scale(.9)!important;-o-transform:scale(.9)!important;transform:scale(.9)!important}}@media(max-width:768px)and (orientation:landscape){.account-panel.jsx-72e2053863c6bf2f{top:50px!important;max-height:-webkit-calc(100vh - 60px)!important;max-height:-moz-calc(100vh - 60px)!important;max-height:calc(100vh - 60px)!important;overflow-y:auto!important}.account-panel.jsx-72e2053863c6bf2f div[style*="display: flex"][style*="gap: 16px"].jsx-72e2053863c6bf2f{-webkit-box-orient:horizontal!important;-webkit-box-direction:normal!important;-webkit-flex-direction:row!important;-moz-box-orient:horizontal!important;-moz-box-direction:normal!important;-ms-flex-direction:row!important;flex-direction:row!important;text-align:left!important}}'})]}):null}function AccountButton({user:t,onUserUpdate:a}){let[e,n]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let handleEscape=t=>{"Escape"===t.key&&e&&n(!1)};return e?(document.addEventListener("keydown",handleEscape),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",handleEscape),document.body.style.overflow=""}},[e]),t)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:()=>{n(!e)},style:{position:"fixed",top:"20px",left:"20px",width:"48px",height:"48px",borderRadius:"16px",border:"2px solid var(--glass-border)",background:"var(--glass)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",boxShadow:"var(--soft-shadow), 0 0 20px var(--theme-primary)15",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:997,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"600",color:"var(--primary)",overflow:"hidden",position:"relative"},onMouseEnter:t=>{t.target.style.transform="translateY(-2px) scale(1.05)",t.target.style.boxShadow="var(--soft-shadow), 0 0 30px var(--theme-primary)25"},onMouseLeave:t=>{t.target.style.transform="translateY(0) scale(1)",t.target.style.boxShadow="var(--soft-shadow), 0 0 20px var(--theme-primary)15"},title:e?"Close account panel":"Open account panel",className:"jsx-3957f9e5a5b1d7a7 account-button",children:[o.jsx("div",{style:{position:"absolute",inset:0,background:e?"linear-gradient(135deg, var(--theme-primary)20, var(--theme-secondary)20)":"transparent",borderRadius:"14px",transition:"all 0.3s ease"},className:"jsx-3957f9e5a5b1d7a7"}),o.jsx("div",{style:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",transition:"all 0.3s ease"},className:"jsx-3957f9e5a5b1d7a7",children:e?o.jsx("span",{style:{fontSize:"16px",transform:"rotate(180deg)",transition:"transform 0.3s ease"},className:"jsx-3957f9e5a5b1d7a7",children:"←"}):o.jsx(o.Fragment,{children:t.avatar?o.jsx("img",{src:t.avatar,alt:"Account",style:{width:"32px",height:"32px",borderRadius:"10px",objectFit:"cover"},className:"jsx-3957f9e5a5b1d7a7"}):o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"10px",background:"linear-gradient(135deg, var(--theme-primary), var(--theme-secondary))",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"14px",fontWeight:"700"},className:"jsx-3957f9e5a5b1d7a7",children:t.name.slice(0,2).toUpperCase()})})}),o.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",transition:"left 0.5s ease"},className:"jsx-3957f9e5a5b1d7a7 hover-shine"})]}),o.jsx(AccountPanel,{user:t,isOpen:e,onClose:()=>{n(!1)},onToggleAnonymous:t=>{a&&a(t)}}),o.jsx(i(),{id:"3957f9e5a5b1d7a7",children:".account-button.jsx-3957f9e5a5b1d7a7:hover .hover-shine.jsx-3957f9e5a5b1d7a7{left:100%}@media(max-width:768px){.account-button.jsx-3957f9e5a5b1d7a7{top:max(16px,env(safe-area-inset-top,16px))!important;left:max(16px,env(safe-area-inset-left,16px))!important;width:46px!important;height:46px!important;position:fixed!important;z-index:999!important;overflow:visible!important;-webkit-box-sizing:border-box!important;-moz-box-sizing:border-box!important;box-sizing:border-box!important;-webkit-transform-origin:top left!important;-moz-transform-origin:top left!important;-ms-transform-origin:top left!important;-o-transform-origin:top left!important;transform-origin:top left!important}.account-button.jsx-3957f9e5a5b1d7a7>div.jsx-3957f9e5a5b1d7a7:last-child{width:30px!important;height:30px!important}.account-button.jsx-3957f9e5a5b1d7a7 img.jsx-3957f9e5a5b1d7a7,.account-button.jsx-3957f9e5a5b1d7a7>div.jsx-3957f9e5a5b1d7a7:last-child>div.jsx-3957f9e5a5b1d7a7{width:28px!important;height:28px!important;font-size:12px!important}}@media(max-width:600px){.account-button.jsx-3957f9e5a5b1d7a7{top:max(14px,env(safe-area-inset-top,14px))!important;left:max(14px,env(safe-area-inset-left,14px))!important;width:44px!important;height:44px!important;min-width:44px!important;min-height:44px!important;-ms-touch-action:-ms-manipulation!important;-ms-touch-action:manipulation!important;touch-action:manipulation!important}.account-button.jsx-3957f9e5a5b1d7a7>div.jsx-3957f9e5a5b1d7a7:last-child{width:28px!important;height:28px!important}.account-button.jsx-3957f9e5a5b1d7a7 img.jsx-3957f9e5a5b1d7a7,.account-button.jsx-3957f9e5a5b1d7a7>div.jsx-3957f9e5a5b1d7a7:last-child>div.jsx-3957f9e5a5b1d7a7{width:26px!important;height:26px!important;font-size:11px!important}.account-button.jsx-3957f9e5a5b1d7a7 span.jsx-3957f9e5a5b1d7a7{font-size:14px!important}}@media(max-width:480px){.account-button.jsx-3957f9e5a5b1d7a7{top:max(12px,env(safe-area-inset-top,12px))!important;left:max(12px,env(safe-area-inset-left,12px))!important;width:42px!important;height:42px!important;min-width:42px!important;min-height:42px!important;border-width:1.5px!important;-webkit-border-radius:14px!important;-moz-border-radius:14px!important;border-radius:14px!important}.account-button.jsx-3957f9e5a5b1d7a7>div.jsx-3957f9e5a5b1d7a7:last-child{width:26px!important;height:26px!important}.account-button.jsx-3957f9e5a5b1d7a7 img.jsx-3957f9e5a5b1d7a7,.account-button.jsx-3957f9e5a5b1d7a7>div.jsx-3957f9e5a5b1d7a7:last-child>div.jsx-3957f9e5a5b1d7a7{width:24px!important;height:24px!important;font-size:10px!important;-webkit-border-radius:8px!important;-moz-border-radius:8px!important;border-radius:8px!important}.account-button.jsx-3957f9e5a5b1d7a7 span.jsx-3957f9e5a5b1d7a7{font-size:12px!important}}@media(max-width:360px){.account-button.jsx-3957f9e5a5b1d7a7{top:max(10px,env(safe-area-inset-top,10px))!important;left:max(10px,env(safe-area-inset-left,10px))!important;width:40px!important;height:40px!important;min-width:40px!important;min-height:40px!important;-webkit-border-radius:12px!important;-moz-border-radius:12px!important;border-radius:12px!important}.account-button.jsx-3957f9e5a5b1d7a7>div.jsx-3957f9e5a5b1d7a7:last-child{width:24px!important;height:24px!important}.account-button.jsx-3957f9e5a5b1d7a7 img.jsx-3957f9e5a5b1d7a7,.account-button.jsx-3957f9e5a5b1d7a7>div.jsx-3957f9e5a5b1d7a7:last-child>div.jsx-3957f9e5a5b1d7a7{width:22px!important;height:22px!important;font-size:9px!important;-webkit-border-radius:6px!important;-moz-border-radius:6px!important;border-radius:6px!important}}@media(max-width:768px)and (orientation:landscape){.account-button.jsx-3957f9e5a5b1d7a7{top:max(8px,env(safe-area-inset-top,8px))!important;left:max(12px,env(safe-area-inset-left,12px))!important;width:40px!important;height:40px!important}}@media(-webkit-min-device-pixel-ratio:2),(min-resolution:192dpi),(min--moz-device-pixel-ratio:2){.account-button.jsx-3957f9e5a5b1d7a7{-webkit-font-smoothing:antialiased!important;-moz-osx-font-smoothing:grayscale!important}}@supports(-webkit-touch-callout:none){.account-button.jsx-3957f9e5a5b1d7a7{top:max(16px,constant(safe-area-inset-top),env(safe-area-inset-top))!important;left:max(16px,constant(safe-area-inset-left),env(safe-area-inset-left))!important;-ms-touch-action:-ms-manipulation!important;-ms-touch-action:manipulation!important;touch-action:manipulation!important;-webkit-touch-callout:none!important;-webkit-user-select:none!important}}@media screen and (-webkit-min-device-pixel-ratio:0)and (min-resolution:.001dpcm),screen and (-webkit-min-device-pixel-ratio:0)and (-webkit-min-device-pixel-ratio:0),screen and (-webkit-min-device-pixel-ratio:0)and (min--moz-device-pixel-ratio:0){.account-button.jsx-3957f9e5a5b1d7a7{will-change:transform!important;-ms-touch-action:-ms-manipulation!important;-ms-touch-action:manipulation!important;touch-action:manipulation!important}}@media(max-width:768px){.account-button.jsx-3957f9e5a5b1d7a7{zoom:1!important;-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important}.account-button.jsx-3957f9e5a5b1d7a7:hover{-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important}.account-button.jsx-3957f9e5a5b1d7a7:active{-webkit-transform:scale(.95)!important;-moz-transform:scale(.95)!important;-ms-transform:scale(.95)!important;-o-transform:scale(.95)!important;transform:scale(.95)!important}}@media(max-width:768px){.account-button.jsx-3957f9e5a5b1d7a7{visibility:visible!important;opacity:1!important;display:-webkit-box!important;display:-webkit-flex!important;display:-moz-box!important;display:-ms-flexbox!important;display:flex!important;z-index:999999!important;clip:auto!important;-webkit-clip-path:none!important;clip-path:none!important;isolation:isolate!important}}"})]}):null}}};