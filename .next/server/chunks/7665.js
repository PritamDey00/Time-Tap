"use strict";exports.id=7665,exports.ids=[7665],exports.modules={7665:(e,s,t)=>{function handleApiError(e,s,t={}){return(console.error("API Error:",{message:e.message,stack:e.stack,timestamp:new Date().toISOString(),context:{method:t.method||"unknown",path:t.path||"unknown",userId:t.userId||"anonymous",userAgent:t.userAgent||"unknown",ip:t.ip||"unknown",...t}}),"No token provided"===e.message||"Invalid token"===e.message)?s.status(401).json({error:"Unauthorized",type:"auth",message:"Please log in again to continue",retryable:!1}):"Todo not found"===e.message||"User not found"===e.message||"Classroom not found"===e.message||e.message.includes("not found")?s.status(404).json({error:"Not Found",type:"notFound",message:"The requested item could not be found",retryable:!1}):"Access denied"===e.message||"Admin access required"===e.message||e.message.includes("permission")||e.message.includes("forbidden")?s.status(403).json({error:"Forbidden",type:"auth",message:"You do not have permission to perform this action",retryable:!1}):e.message.includes("validation")||e.message.includes("required")||e.message.includes("invalid")||e.message.includes("Missing")||e.message.includes("Bad request")?s.status(400).json({error:"Bad Request",type:"validation",message:e.message,retryable:!1}):"already_exists"===e.message||e.message.includes("already exists")||e.message.includes("conflict")?s.status(409).json({error:"Conflict",type:"conflict",message:e.message,retryable:!1}):e.message.includes("Method not allowed")?s.status(405).json({error:"Method Not Allowed",type:"method",message:e.message,retryable:!1}):s.status(500).json({error:"Internal Server Error",type:"server",message:"An unexpected error occurred. Please try again.",retryable:!0})}function validateRequest(e,s){let t=[];if(void 0!==s.text&&void 0!==e.body.text&&("string"!=typeof e.body.text?t.push("Text must be a string"):0===e.body.text.trim().length?t.push("Text cannot be empty"):e.body.text.length>200&&t.push("Text cannot exceed 200 characters")),void 0===s.priority||void 0===e.body.priority||["low","medium","high"].includes(e.body.priority)||t.push("Priority must be one of: low, medium, high"),void 0!==s.completed&&void 0!==e.body.completed&&"boolean"!=typeof e.body.completed&&t.push("Completed must be a boolean"),t.length>0)throw Error("Validation failed: "+t.join(", "))}function getRequestContext(e){return{method:e.method,path:e.url,userAgent:e.headers["user-agent"]||"unknown",ip:e.headers["x-forwarded-for"]||e.socket?.remoteAddress||"unknown",timestamp:new Date().toISOString()}}function logApiRequest(e,s={}){console.log("API Request:",{...getRequestContext(e),...s})}t.d(s,{Gl:()=>validateRequest,Ts:()=>getRequestContext,VX:()=>logApiRequest,zG:()=>handleApiError})}};